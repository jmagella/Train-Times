<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NYC Subway Board - Version 1.0 Milestone</title>
    <script src="https://cdn.jsdelivr.net/npm/protobufjs@7.2.4/dist/protobuf.min.js"></script>
    <style>
        body { 
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; 
            background: #000; color: #fff; margin: 0; padding: 10px;
            display: flex; flex-direction: column; align-items: center;
        }
        .station-container { width: 100%; max-width: 850px; margin-bottom: 20px; }
        .white-line { height: 2px; background: #fff; width: 100%; margin-top: 15px; }
        
        .header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            padding: 12px 0; 
            cursor: pointer; 
            user-select: none;
        }
        .header:hover { background: rgba(255,255,255,0.05); }

        .station-name { 
            font-size: clamp(1.2rem, 5vw, 2.5rem); 
            font-weight: 700; 
            letter-spacing: -1.5px; 
            margin: 0; 
        }

        .service-alert {
            color: #D4AF37; 
            font-size: 0.8rem;
            font-weight: 500;
            margin-bottom: 10px;
            text-transform: uppercase;
            display: none;
            line-height: 1.3;
        }
        
        .bullet-box { display: flex; gap: 5px; }
        .circle-lg {
            color: #fff; border-radius: 50%; width: clamp(35px, 8vw, 58px); height: clamp(35px, 8vw, 58px); 
            display: flex; align-items: center; justify-content: center; 
            font-size: clamp(20px, 5vw, 36px); font-weight: 900;
        }
        
        .color-red { background: #EE352E; }
        .color-purple { background: #B933AD; }
        .color-yellow { background: #FCCC0A; color: #000 !important; } 
        .color-orange { background: #FF6319; }

        .hidden { display: none !important; }
        
        .grid-system { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); 
            column-gap: 120px; 
            width: 100%; 
            padding-bottom: 20px;
        }
        
        .column-title { color: #666; text-transform: uppercase; font-size: 1.4rem; font-weight: 900; padding-bottom: 5px; margin-bottom: 5px; border-bottom: 1px solid #222; letter-spacing: 2px; text-align: right; }
        .train-row { display: flex; align-items: center; padding: 8px 0; border-bottom: 1px solid #222; min-height: 40px; }
        .circle-sm { border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-size: 18px; font-weight: 900; flex-shrink: 0; margin-right: 12px; }
        .circle-sm:not(.color-yellow) { color: #fff; }
        
        .clock-time { font-size: 1.1rem; color: #888; font-weight: 500; }
        .time-display { font-size: 2rem; font-weight: 700; text-align: right; white-space: nowrap; flex-grow: 1; }
        .min-unit { font-size: 0.4em; color: #666; margin-left: 4px; }
        
        .arriving { color: #00FF00; font-size: 0.8em; font-weight: 900; }
        
        #status-bar { color: #333; font-size: 0.7rem; margin-top: 20px; text-align: center; }
        
        @media (max-width: 600px) { 
            .grid-system { grid-template-columns: 1fr; gap: 20px; } 
            .column-title { text-align: left; font-size: 1.2rem; } 
        }
    </style>
</head>
<body>

    <div id="station-list">
        <!-- 103 St (OPEN BY DEFAULT) -->
        <div class="station-container">
            <div class="white-line"></div>
            <div class="header" onclick="toggleStation('body-119')">
                <h1 class="station-name">103 Street Station</h1>
                <div class="bullet-box"><div class="circle-lg color-red">1</div></div>
            </div>
            <div id="alert-119" class="service-alert"></div>
            <div id="body-119" class="grid-system">
                <div><div class="column-title">Downtown</div><div id="stop-119-S"></div></div>
                <div><div class="column-title">Uptown</div><div id="stop-119-N"></div></div>
            </div>
        </div>

        <!-- 96 St -->
        <div class="station-container">
            <div class="white-line"></div>
            <div class="header" onclick="toggleStation('body-120')">
                <h1 class="station-name">96 Street Station</h1>
                <div class="bullet-box"><div class="circle-lg color-red">1</div><div class="circle-lg color-red">2</div><div class="circle-lg color-red">3</div></div>
            </div>
            <div id="alert-120" class="service-alert"></div>
            <div id="body-120" class="grid-system hidden">
                <div><div class="column-title">Downtown</div><div id="stop-120-S"></div></div>
                <div><div class="column-title">Uptown</div><div id="stop-120-N"></div></div>
            </div>
        </div>

        <!-- 59 St (1) -->
        <div class="station-container">
            <div class="white-line"></div>
            <div class="header" onclick="toggleStation('body-125')">
                <h1 class="station-name">59 St - Columbus Circle</h1>
                <div class="bullet-box"><div class="circle-lg color-red">1</div></div>
            </div>
            <div id="alert-125" class="service-alert"></div>
            <div id="body-125" class="grid-system hidden">
                <div><div class="column-title">Downtown</div><div id="stop-125-S"></div></div>
                <div><div class="column-title">Uptown</div><div id="stop-125-N"></div></div>
            </div>
        </div>

        <!-- 59 St (BD) -->
        <div class="station-container">
            <div class="white-line"></div>
            <div class="header" onclick="toggleStation('body-A24')">
                <h1 class="station-name">59 St - Columbus Circle</h1>
                <div class="bullet-box"><div class="circle-lg color-orange">B</div><div class="circle-lg color-orange">D</div></div>
            </div>
            <div id="alert-A24" class="service-alert"></div>
            <div id="body-A24" class="grid-system hidden">
                <div><div class="column-title">Downtown</div><div id="stop-A24-S"></div></div>
                <div><div class="column-title">Uptown</div><div id="stop-A24-N"></div></div>
            </div>
        </div>

        <!-- 42 St (IRT) -->
        <div class="station-container">
            <div class="white-line"></div>
            <div class="header" onclick="toggleStation('body-127')">
                <h1 class="station-name">42 St - Times Square</h1>
                <div class="bullet-box"><div class="circle-lg color-red">1</div><div class="circle-lg color-red">2</div><div class="circle-lg color-red">3</div></div>
            </div>
            <div id="alert-127" class="service-alert"></div>
            <div id="body-127" class="grid-system hidden">
                <div><div class="column-title">Downtown</div><div id="stop-127-S"></div></div>
                <div><div class="column-title">Uptown</div><div id="stop-127-N"></div></div>
            </div>
        </div>

        <!-- 42 St (7) -->
        <div class="station-container">
            <div class="white-line"></div>
            <div class="header" onclick="toggleStation('body-725')">
                <h1 class="station-name">42 St - Times Square</h1>
                <div class="bullet-box"><div class="circle-lg color-purple">7</div></div>
            </div>
            <div id="alert-725" class="service-alert"></div>
            <div id="body-725" class="grid-system hidden">
                <div><div class="column-title">Downtown</div><div id="stop-725-S"></div></div>
                <div><div class="column-title">Uptown</div><div id="stop-725-N"></div></div>
            </div>
        </div>

        <!-- 42 St (NRQ) -->
        <div class="station-container">
            <div class="white-line"></div>
            <div class="header" onclick="toggleStation('body-R16')">
                <h1 class="station-name">42 St - Times Square</h1>
                <div class="bullet-box"><div class="circle-lg color-yellow">N</div><div class="circle-lg color-yellow">R</div><div class="circle-lg color-yellow">Q</div></div>
            </div>
            <div id="alert-R16" class="service-alert"></div>
            <div id="body-R16" class="grid-system hidden">
                <div><div class="column-title">Downtown</div><div id="stop-R16-S"></div></div>
                <div><div class="column-title">Uptown</div><div id="stop-R16-N"></div></div>
            </div>
        </div>

        <!-- 34 St Penn -->
        <div class="station-container">
            <div class="white-line"></div>
            <div class="header" onclick="toggleStation('body-128')">
                <h1 class="station-name">34 Street Penn Station</h1>
                <div class="bullet-box"><div class="circle-lg color-red">1</div><div class="circle-lg color-red">2</div><div class="circle-lg color-red">3</div></div>
            </div>
            <div id="alert-128" class="service-alert"></div>
            <div id="body-128" class="grid-system hidden">
                <div><div class="column-title">Downtown</div><div id="stop-128-S"></div></div>
                <div><div class="column-title">Uptown</div><d
